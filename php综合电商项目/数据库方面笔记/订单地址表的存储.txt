



 比如我有一个地址管理模块里面存的是用户常用的地址
 
 
 方法一
比如我购买一件商品，选择张三这个地址。  提交成功后   订单表中有一个字段关联  用户地址ID.

我们会按照这个地址发货，订单地址也会显示此地址。。若用户修改了张三的这个地址信息。。

下次看这个订单详情时，地址也会改变，因为根据用户地址ID关联。。


方法二：

提交订单的时候，把姓名，电话，地址都记录在订单表中。。这样就不关联用户地址表。。

无论用户修改地址也没关系。。但感觉这样设计订单表就多了一些字段。


如何更好的设计呢？

即可以随意的修改地址管理，也不会影响到订单详情看到的地址信息。



 解决办法 :
 
 
 我们的解决办法是，订单表还是关联地址ID

在地址表中加入一个字段，status用于是否有效。。如果用户修改地址信息就把当前地址设置为无效，并新增操作。。

 如果用户删除地址信息，就把当前地址设置为无效。

这样就不会因为用户修改了信息导致订单改变



 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 